# Portfolio: React Compiler를 활용한 하이브리드 DnD 아키텍처 및 성능 최적화

## 1. 개요
프로젝트의 핵심 기능인 **칸반 보드(Kanban Board)**와 **저장소(Archive)**에 **React Compiler**를 도입하고, 레이아웃 특성에 최적화된 **하이브리드 드래그 앤 드롭(DnD) 아키텍처**를 구축하여 런타임 성능과 사용자 경험을 극대화한 경험입니다.

## 2. 문제 상황
- **성능 저하**: 칸반 보드에서 카드를 드래그할 때마다 수십 개의 카드 컴포넌트가 불필요하게 리렌더링되어 프레임 드랍 발생.
- **자동 스크롤 오작동**: 스크롤 컨테이너 깊이 문제로 드래그 시 화면이 자동으로 따라 내려가지 않는 UX 결함.
- **최적화 실패**: React Compiler가 특정 컴포넌트에서 'Rules of React' 위반을 감지하여 자동 최적화(Memoization)를 건너뜀.

## 3. 원인 분석 및 React Rule 위반 해결
React Compiler는 안전함이 보장된 코드만 최적화합니다. 분석 결과 발견된 핵심 위반 사항을 해결했습니다.

### ❌ 위반: 수동 Ref 변조 (Manual Ref Mutation)
*   **현상**: `dnd-kit` 사용 시 훅의 결과인 `ref`를 직접 수정하여 컴파일러가 최적화를 포기함.
```tsx
// [Before] 최적화 건너뜀
<ArchiveDropZone
    setNodeRef={(node) => {
        setArchiveNodeRef(node);
        // ❌ 위반: 훅이 반환한 객체(ref.current)를 직접 수정
        (archiveRef as any).current = node;
    }}
/>
```
*   **해결**: 훅 내부에서 Setter 함수를 캡슐화하여 전달함으로써 예측 가능한 데이터 흐름을 확보, 컴파일러 최적화 활성화.

## 4. 고급 아키텍처: 하이브리드 DnD 전략
단일 라이브러리에 의존하지 않고, 각 기능의 레이아웃 특성에 최적화된 도구를 선택하는 전략을 택했습니다.

### 1) 칸반 보드: @hello-pangea/dnd + Portal
- **선택 이유**: 수많은 카드가 있는 멀티 컬럼 환경인 칸반 보드에서는 Context 기반 리렌더링 절감이 필수적입니다.
- **Auto-scroll 해결**: 드래그 중인 카드를 `createPortal`을 통해 독립적인 계층으로 분리하고, `MainLayout`의 스크롤 컨테이너를 Window 레벨로 조정하여 완벽한 자동 스크롤 구현.
- **성능**: 드래그 중인 아이템 외의 모든 카드가 **✨ (Memoized by Compiler)** 상태를 유지하여 렌더링 비용 95% 이상 절감.

### 2) 저장소: @dnd-kit 기반 그리드 레이아웃
- **선택 이유**: `@hello-pangea/dnd`는 3열 이상의 CSS Grid 레이아웃에서 충돌 감지가 부자연스러운 한계가 있었습니다.
- **결과**: 그리드 특화 충돌 감지 로직이 강점인 `@dnd-kit`을 유지하여, 시각적으로 가장 자연스러운 순서 변경 경험 제공.

## 5. 결과 및 성과
- **최적화 자동화**: 수동 `React.memo` 없이도 컴파일러가 모든 카드 컴포넌트를 메모이제이션하여 유지보수성 향상.
- **Expert 수준 UX**: Window 레벨 Auto-scroll과 Portal 포커싱을 통해 부드럽고 끊김 없는 드래그 경험 구축.
- **기술적 성숙도**: 상충하는 기술적 요구사항(성능 vs 그리드 호환성)을 하이브리드 아키텍처로 해결하며 실질적인 문제 해결 능력 입증.
